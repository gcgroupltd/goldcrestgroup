<style>
    .window-inspiration {
        padding: 40px 0;
        background-color: {{ section.settings.background_color }};
    }

    .window-inspiration__header h2 {
        margin: 0 0 0 0;
    }

    .window-inspiration__grid {
        column-count: 4;
        column-gap: 1.5rem;
        padding: 1rem 0;
        position: relative;
    }

    .window-inspiration__image {
        break-inside: avoid;
        margin-bottom: 1.5rem;
            width: 100%;
        -webkit-column-break-inside: avoid;
        page-break-inside: avoid;
        position: relative;
    }

    .window-inspiration img {
        width: 100%;
        display: block;
        border-radius: 4px;
        height: auto;
        margin-bottom: 1.5rem;
    }

    .window-inspiration img:hover {
      cursor: zoom-in;
    }

    @media (max-width: 768px) {
        .window-inspiration__grid {
            column-count: 2;
        }
    }

    #image-viewer {
      display:none;
      position:fixed;
      top:0;
      left:0;
      width:100vw;
      height:100vh;
      z-index:9999;
      justify-content:center;
      align-items:center;
    }

    #image-viewer-img {
      max-width:100vw;
      max-height:100vh;
      object-fit:contain;
      cursor:zoom-out;
      box-shadow:0 4px 20px rgba(0,0,0,0.5);
      transform: scale(1.4);
    }

</style>

<section class="window-inspiration" data-section-id="bullet-list-sections--{{ section.id }}">
    <div class="page-width">
        <div class="window-inspiration__header">
            <h2 class="window-inspiration__title"><strong>{{ section.settings.heading }}</strong></h2>
            <p>{{ section.settings.subheading }}</p>
        </div>
        <div class="window-inspiration__grid">
            {%- for block in collection.metafields['custom']['image_gallery'].value -%}
            {% comment %} <div class="window-inspiration__image" {{ block.shopify_attributes }}> {% endcomment %}
                {%- if block.image != blank -%}

                    <img src="{{ block | image_url: width: 400 }}"
                        alt="{{ block | image_alt | default: block.settings.title | escape }}"
                        loading="lazy">
                {%- else -%}
                    {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                {%- endif -%}
            {% comment %} </div> {% endcomment %}
            {%- endfor -%}
        </div>
    </div>
</section>

<div id="image-viewer">
  <img id="image-viewer-img" src="" alt="">
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const viewer = document.getElementById('image-viewer');
    const viewerImg = document.getElementById('image-viewer-img');
    const images = document.querySelectorAll('.window-inspiration__grid img');

    let isViewerOpen = false;

    images.forEach(img => {
      img.addEventListener('click', function (e) {
        e.stopPropagation(); // prevent immediate close
        viewerImg.src = img.src;
        viewer.style.display = 'flex';
        isViewerOpen = true;
      });
    });

    function closeViewer() {
      if (isViewerOpen) {
        viewer.style.display = 'none';
        viewerImg.src = '';
        isViewerOpen = false;
      }
    }

    // Click outside the image
    document.addEventListener('click', closeViewer);

    // Scroll closes the viewer
    document.addEventListener('scroll', closeViewer);

    // Prevent closing when clicking on the fullscreen image
    viewerImg.addEventListener('click', function (e) {
      e.stopPropagation();
    });
  });


</script>



{% schema %}
{
  "name": "Window Inspiration",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Window Inspiration"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "We've plenty of fabulous ideas to get your next project started"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Section Background Color",
      "default": "#FFFFFF"
    }
  ],
  "presets": [
    {
      "name": "Window Inspiration",
    }
  ]
}
{% endschema %}