{% comment %}
  How it works — horizontal steps
  Drop this file into:  /sections/how-it-works.liquid
  Then add the section in the theme customizer.
{% endcomment %}

<section id="how-it-works-{{ section.id }}" class="hiw-section color-{{ section.settings.color_scheme }}" style="--hiw-pt: {{ section.settings.padding_top }}px; --hiw-pb: {{ section.settings.padding_bottom }}px; --hiw-bg: {{ section.settings.bg_color }}; --hiw-card: {{ section.settings.card_bg }}; --hiw-border: {{ section.settings.border_color }}; --hiw-arrow: {{ section.settings.arrow_color }}; --hiw-body-size: {{ section.settings.body_font_size | default: 16 }}px;">
  <div class="page-width">
    {% if section.settings.heading != blank %}
      <h2 class="hiw-heading">{{ section.settings.heading }}</h2>
    {% endif %}

    {% if section.settings.intro != blank %}
      <div class="hiw-intro rte">{{ section.settings.intro }}</div>
    {% endif %}

    <div class="hiw-steps" role="list">
      {% for block in section.blocks %}
        <article class="hiw-step" role="listitem" {{ block.shopify_attributes }}>
          {% if section.settings.show_numbers %}
            <div class="hiw-label">Step {{ block.settings.custom_number | default: forloop.index }}</div>
          {% endif %}

          {% if block.settings.icon != blank %}
            <div class="hiw-icon">
              <img
                src="{{ block.settings.icon | image_url: width: 200 }}"
                alt=""
                width="{{ block.settings.icon.width }}"
                height="{{ block.settings.icon.height }}"
                loading="lazy"
              >
            </div>
          {% endif %}

          {% if block.settings.title != blank %}
            <h3 class="hiw-title">{{ block.settings.title }}</h3>
          {% endif %}

          {% if block.settings.text != blank %}
            <div class="hiw-text rte">{{ block.settings.text }}</div>
          {% endif %}

        </article>
      {% endfor %}
    </div>
  </div>
</section>

<style>
  #how-it-works-{{ section.id }}.hiw-section {
    background: var(--hiw-bg);
    padding-top: var(--hiw-pt);
    padding-bottom: var(--hiw-pb);
  }

  #how-it-works-{{ section.id }} .hiw-heading {
    text-align: left;
    margin: 0 0 0.75rem;
    {% comment %} font-family: Didot, "Bodoni MT", "Times New Roman", serif; {% endcomment %}
    font-size: 30px;
    line-height: 1.15;
    letter-spacing: .3px;
  }
  #how-it-works-{{ section.id }} .hiw-intro {
    max-width: 860px;
    margin: 0 0 2.2rem;
    text-align: left;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    opacity: .92;
  }

  #how-it-works-{{ section.id }} .hiw-steps {
    display: flex;
    gap: 24px;
    align-items: stretch;
  }

  #how-it-works-{{ section.id }} .hiw-step {
    position: relative;
    flex: 1 1 0;
    background: var(--hiw-card);
    border: 1px solid var(--hiw-border);
    border-radius: 14px;
    padding: 22px 22px 20px;
    box-shadow: 0 1px 2px rgba(0,0,0,.04);
  }

  #how-it-works-{{ section.id }} .hiw-label {
    display: block;
    text-align: left;
    margin: 0 auto 12px;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-weight: 300;
    font-size: 16px;
    letter-spacing: .08em;
    text-transform: uppercase;
    color: var(--hiw-arrow);
  }
  #how-it-works-{{ section.id }} .hiw-icon {
    margin-bottom: 10px;
  }
  #how-it-works-{{ section.id }} .hiw-title {
    font-size: 28px;
   font-weight: 900;
    margin: 4px 0 12px;
    line-height: 1.25;
    color: var(--primary-button-colour);
  }
  #how-it-works-{{ section.id }} .hiw-text {
    opacity: .95;
    font-size: var(--hiw-body-size);
    line-height: 1.6;
  }

  /* 2-column tablet layout */
  @media (max-width: 990px) {
    #how-it-works-{{ section.id }} .hiw-steps { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
  }

  /* 1-column mobile */
  @media (max-width: 600px) {
    #how-it-works-{{ section.id }} .hiw-steps { display: block; }
    /* tighter space between cards + slightly tighter inner padding */
    #how-it-works-{{ section.id }} .hiw-step { margin-bottom: 14px; padding: 16px 16px 14px; }
    /* reduce section padding top/bottom */
    #how-it-works-{{ section.id }}.hiw-section { padding-top: 20px; padding-bottom: 20px; }
    /* tighten heading & intro spacing */
    #how-it-works-{{ section.id }} .hiw-heading { margin: 0 0 8px; }
    #how-it-works-{{ section.id }} .hiw-intro { margin: 0 0 16px; }
  }} 
  
    .hiw-steps { display: block; }
    #how-it-works-{{ section.id }} .hiw-step { margin-bottom: 20px; }
    #how-it-works-{{ section.id }}.hiw-section { padding-top: 40px; padding-bottom: 40px; }
  }
</style>

{% schema %}
{
  "name": "How it works (horizontal)",
  "tag": "section",
  "class": "section how-it-works",
  "max_blocks": 4,
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "How it works" },
    { "type": "richtext", "id": "intro", "label": "Intro text", "default": "<p>From first visit to final fit, here’s our simple four‑step process.</p>" },

    { "type": "color", "id": "bg_color", "label": "Background", "default": "#ffffff" },
    { "type": "color", "id": "card_bg", "label": "Card background", "default": "#ffffff" },
    { "type": "color", "id": "border_color", "label": "Card border", "default": "#e5e7eb" },
    { "type": "color", "id": "arrow_color", "label": "Arrow/number color", "default": "#0f172a" },

    { "type": "select", "id": "color_scheme", "label": "Color scheme (text)", "options": [
      {"value":"background-1","label":"Default"},
      {"value":"background-2","label":"Inverse"}
    ], "default": "background-1" },

    { "type": "checkbox", "id": "show_numbers", "label": "Show step label", "default": true },
    { "type": "range", "id": "body_font_size", "min": 12, "max": 24, "step": 1, "unit": "px", "label": "Body text size", "default": 16 },
    { "type": "range", "id": "padding_top", "min": 0, "max": 120, "step": 4, "unit": "px", "label": "Padding top", "default": 60 },
    { "type": "range", "id": "padding_bottom", "min": 0, "max": 120, "step": 4, "unit": "px", "label": "Padding bottom", "default": 60 }
  ],
  "blocks": [
    {
      "type": "step",
      "name": "Step",
      "limit": 4,
      "settings": [
        { "type": "text", "id": "custom_number", "label": "Custom number (optional)" },
        { "type": "image_picker", "id": "icon", "label": "Icon (optional)" },
        { "type": "text", "id": "title", "label": "Title", "default": "Book your appointment" },
        { "type": "richtext", "id": "text", "label": "Description", "default": "<p>Choose a time that suits you and we’ll visit to discuss ideas.</p>" }
      ]
    }
  ],
  "presets": [
    {
      "name": "How it works",
      "blocks": [
        { "type": "step" },
        { "type": "step" },
        { "type": "step" },
        { "type": "step" }
      ]
    }
  ]
}
{% endschema %}
